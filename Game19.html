<script async src="https://www.googletagmanager.com/gtag/js?id=G-L7856P3VNT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-L7856P3VNT');
</script>
<!DOCTYPE html>
<html lang="en-us">
<head>
    <title>Home - Google Drive</title>
    <link rel="icon" type="image/png" href="https://static.vecteezy.com/system/resources/previews/012/871/368/non_2x/google-drive-icon-google-product-illustration-free-png.png">

    <base href="https://cdn.jsdelivr.net/gh/genizy/web-port@main/repo/">
    <meta charset="utf-8">
    <link rel="stylesheet" href="TemplateData/style.css">

    <style>
        :root { --accent-purple: #ba67ff; }
        body { margin: 0; background: #000; overflow: hidden; height: 100vh; }
        #unity-container { width: 100%; height: 100%; position: fixed; top: 0; left: 0; }
        .ui-controls { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 15px; z-index: 9999; }
        .btn { background: rgba(186,103,255,0.2); border: 1px solid var(--accent-purple); color: white; padding: 10px 20px; border-radius: 12px; font-weight: 600; cursor: pointer; text-transform: uppercase; font-size: 12px; backdrop-filter: blur(10px); transition: 0.3s; display: flex; align-items: center; gap: 8px; text-decoration: none; }
        .btn:hover { background: var(--accent-purple); box-shadow: 0 0 20px rgba(186,103,255,0.6); transform: translateY(-2px); }
    </style>
</head>
<body>
    <div id="loading-text" style="color: white; font-family: cursive; font-size: 48px; text-align: center; margin-top: 20px;">LOADING...</div>
    <div id="unity-container"><canvas id="unity-canvas" style="width: 100%; height: 100%"></canvas></div>

    <div class="ui-controls">
        <a href="index.html" class="btn" onclick="event.preventDefault(); window.location.href='index.html';">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L8.707 1.5Z"/></svg>
            Home
        </a>
        <button class="btn" onclick="document.querySelector('#unity-canvas').requestFullscreen()">Fullscreen</button>
    </div>

    <script>
        function mergeFiles(fileParts) {
            return new Promise((resolve, reject) => {
                let buffers = [];
                function fetchPart(index) {
                    if (index >= fileParts.length) { resolve(URL.createObjectURL(new Blob(buffers))); return; }
                    fetch(fileParts[index]).then(r => r.arrayBuffer()).then(data => { buffers.push(data); fetchPart(index + 1); }).catch(reject);
                }
                fetchPart(0);
            });
        }
        function getParts(f, s, e) { let p = []; for (let i = s; i <= e; i++) p.push(f + ".part" + i); return p; }
        
        Promise.all([
            mergeFiles(getParts("Build/NewestBuild.wasm.gz", 1, 3)),
            mergeFiles(getParts("Build/NewestBuild.data.gz", 1, 16))
        ]).then(([wasm, data]) => {
            const config = { dataUrl: data, frameworkUrl: "Build/NewestBuild.framework.js", codeUrl: wasm, streamingAssetsUrl: "StreamingAssets", companyName: "Stupid Game", productName: "R.E.P.O", productVersion: "0.1" };
            const script = document.createElement("script");
            script.src = "Build/NewestBuild.loader.js";
            script.onload = () => {
                createUnityInstance(document.querySelector("#unity-canvas"), config, () => {}).then(() => {
                    document.querySelector("#loading-text").remove();
                });
            };
            document.body.appendChild(script);
        });
    </script>
</body>
</html>
